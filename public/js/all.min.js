!function(e){"use strict";var t={init:function(){var t=e(".carousel-wrapper");return t.map(function(e,t){return new i(t)})}},i=function(t){this._$app=null,this._element=t,this._$el=e(t),this._$carousel=null,this._photoArray=[],this._numSlides=0,this._currentSlideIndex=0,this._lastSlideIndex=0,this._slideElements=[],this._$previousToggle=null,this._$nextToggle=null,this._init()};i.Events={CLICK:"click"},i.Selectors={APP:"app",BASE:"carousel-wrapper",CAROUSEL:"carousel",SLIDE:"carousel__slide",SLIDE_INNER:"carousel__slide-inner",TOGGLE_NEXT:"pagination--next",TOGGLE_PREV:"pagination--prev",ACTIVE_SLIDE:"slide--active",TITLE_WRAP:"carousel__title-wrap",TITLE:"carousel__title"},i.Data={FLICKR_API:"https://api.flickr.com/services/rest/?method=flickr.photosets.getPhotos&api_key=0e3c9488e9e921a3f5de479c26605293&photoset_id=72157626579923453&format=json&nojsoncallback=1",IMAGE_URI:"https://farm{farm-id}.staticflickr.com/{server-id}/{id}_{secret}_b.jpg"},i.prototype._init=function(){this._getPhotoArray(),this._$carousel=this._$el.find("."+i.Selectors.CAROUSEL),this._$previousToggle=this._$el.find("."+i.Selectors.TOGGLE_PREV),this._$nextToggle=this._$el.find("."+i.Selectors.TOGGLE_NEXT)},i.prototype._initializeCarouselBindings=function(){console.log(this._$nextToggle),this._$previousToggle.on(i.Events.CLICK,e.proxy(this._previousSlide,this)),this._$nextToggle.on(i.Events.CLICK,e.proxy(this._nextSlide,this))},i.prototype._getPhotoArray=function(){e.ajax({url:i.Data.FLICKR_API,data:{},success:e.proxy(this._handleDataSucces,this),dataType:"json"})},i.prototype._handleDataSucces=function(e){e.photoset&&e.photoset.photo.length&&(this._populateImageObject(e.photoset.photo),this._createCarousel(),this._initializeCarouselBindings())},i.prototype._populateImageObject=function(e){var t=0,i=e.length;for(t;i>t;t++){var s={},o=e[t],l=this._getImageURI(o);s.src=l,s.title=o.title,this._photoArray.push(s)}},i.prototype._getImageURI=function(e){var t=i.Data.IMAGE_URI.replace("{farm-id}",e.farm).replace("{server-id}",e.server).replace("{id}",e.id).replace("{secret}",e.secret);return t},i.prototype._createCarousel=function(){var e=0,t=this._photoArray.length;for(e;t>e;e++){var i=this._photoArray[e],s=this._createSlide(i,e);this._slideElements.push(s),this._$carousel[0].appendChild(s)}this._gotoSlide(0),this._numSlides=e-1},i.prototype._createSlide=function(t,s){var o=document.createElement("div"),l=document.createElement("div"),n=e('<div class="'+i.Selectors.TITLE_WRAP+'"><span class="'+i.Selectors.TITLE+'">'+t.title+"</span></div>");return o.className=i.Selectors.SLIDE,o.id="slide-"+s,l.style.backgroundImage='url("'+t.src+'")',l.className=i.Selectors.SLIDE_INNER,o.appendChild(l),o.appendChild(n[0]),o},i.prototype._nextSlide=function(){var e=this._currentSlideIndex+1,t=this._getPossibleIndex(e);t!=this._lastSlideIndex&&this._gotoSlide(t),this._lastSlideIndex=this._currentSlideIndex,this._currentSlideIndex=t},i.prototype._previousSlide=function(){var e=this._currentSlideIndex-1,t=this._getPossibleIndex(e);t!=this._lastSlideIndex&&this._gotoSlide(t),this._lastSlideIndex=this._currentSlideIndex,this._currentSlideIndex=t},i.prototype._gotoSlide=function(t){var s=e(this._slideElements);s.removeClass(i.Selectors.ACTIVE_SLIDE),s.eq(t).addClass(i.Selectors.ACTIVE_SLIDE),this._currentSlideIndex=t},i.prototype._getPossibleIndex=function(e){var t;return t=e>this._numSlides?this._numSlides:0>e?0:e},i.prototype.getIndex=function(){return this._currentSlideIndex},app._Modules.Carousel=t,app._Modules.Carousel.init()}(jQuery),function(e){"use strict";var t={init:function(){var t=e(".modal");return t.map(function(e,t){return new i(t)})}},i=function(t){this._$app=null,this._$window=e(window),this._element=t,this._$el=e(t),this._$toggle=null,this._isActive=!1,this._modalFragment=null,this._$overlay=null,this._overlay=null,this._init()};i.Events={CLICK:"click"},i.Selectors={APP:"app",TOGGLE:"modal-toggle",BASE:"modal",OVERLAY:"modal__overlay",MODAL_INNER:"modal__inner",WRAP:"modal--wrapper",DISABLED:"modal--disabled"},i.prototype._init=function(){this._$app=e("."+i.Selectors.APP),this._$toggle=this._$app.find("."+i.Selectors.TOGGLE),this._$modalInner=this._$el.find("."+i.Selectors.MODAL_INNER),this._initalizeBindings()},i.prototype._initalizeBindings=function(){this._$toggle.on(i.Events.CLICK,e.proxy(this._toggleModal,this))},i.prototype._createModalFragment=function(){var e=document.createDocumentFragment();e.appendChild(this._element),this._modalFragment=e},i.prototype._toggleModal=function(e){e.preventDefault(),this._isActive=!this._isActive,this._isActive?this._openModal():this._closeModal()},i.prototype._styleModal=function(){var e=(this._$window.height(),this._$window.width()),t=320>=e-200?300:e-200,i=.625*t;this._$modalInner.css({height:i,width:t})},i.prototype._openModal=function(){this._createModalFragment(),this._styleModal(),this._$app[0].appendChild(this._modalFragment),this._$el.removeClass(i.Selectors.DISABLED),this._createOverlay(),this._createModalBindings()},i.prototype._closeModal=function(){this._$el.addClass(i.Selectors.DISABLED),this._modalFragment=null,this._$app[0].removeChild(this._element),this._destroyOverlay()},i.prototype._createOverlay=function(){var t=document.createElement("div");t.className=i.Selectors.OVERLAY,this._element.appendChild(t),this._$overlay=e(t)},i.prototype._destroyOverlay=function(){this._element.removeChild(this._$overlay[0]),this._overlay=null},i.prototype._createModalBindings=function(){this._$overlay.on(i.Events.CLICK,e.proxy(this._toggleModal,this))},i.prototype._destroyModalBindings=function(){this._$overlay.off(i.Events.CLICK)},app._Modules.Modal=t,app._Modules.Modal.init()}(jQuery);